# CMAKE BUILD FILE FOR FOSI
cmake_minimum_required(VERSION 2.8)

PROJECT ("Fosi")

# USER DEFINED VARIABLES
IF (NOT USER_VARIABLES_NAME)
  SET(USER_VARIABLES_NAME "user-vars-${CMAKE_SYSTEM_NAME}.cmake")
ENDIF(NOT USER_VARIABLES_NAME)
IF (USER_VARIABLES_NAME)
  MESSAGE("Including user defined : ${USER_VARIABLES_NAME}")
ENDIF (USER_VARIABLES_NAME)
INCLUDE(${USER_VARIABLES_NAME})

# SOURCES FILES
FILE (GLOB_RECURSE SRC_FILES ../src/*.cpp)
FILE (GLOB_RECURSE ART_FILES_C ../art/*.cpp)
SET(SRC_FILES ${SRC_FILES} ${ART_FILES_C})
SOURCE_GROUP (source FILES ${SRC_FILES})
FILE (GLOB_RECURSE HEAD_FILES "../src/*.h")
FILE (GLOB_RECURSE ART_FILES_H ../art/*.h)
SET(HEAD_FILES ${HEAD_FILES} ${ART_FILES_H})
SOURCE_GROUP (header FILES ${HEAD_FILES})

#INCLUDE 
INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/../src/")
INCLUDE_DIRECTORIES("${CMAKE_SOURCE_DIR}/../art/")

# VROOMGIS 
SET (SEARCH_VROOMGIS_LIBS ON)
include("../plugins/vroomgis/vroomgis/build/cmake/Use_vroomGISlib.cmake")
include("../plugins/vroomgis/plugins/lscrashreport/build/use_lscrashreport.cmake")
include("../plugins/vroomgis/plugins/wxhgversion/build/use_wxhgversion.cmake")

# Special bundle for APPLE
IF( APPLE )
  #Adding icon and file icon
  SET(APP_ICON_LOCATION "${PROJECT_SOURCE_DIR}/../art/fosi.icns")
  SET_SOURCE_FILES_PROPERTIES(${APP_ICON_LOCATION} PROPERTIES MACOSX_PACKAGE_LOCATION Resources)
  SET(SRC_FILES ${SRC_FILES} ${APP_ICON_LOCATION} ${APP_ICON_FILE_LOCATION})
ENDIF (APPLE)

SET(BUILD_TYPE "MACOSX_BUNDLE")
IF(WIN32)
  SET(BUILD_TYPE "WIN32")
  SET(SRC_FILES ${SRC_FILES} "${CMAKE_SOURCE_DIR}/../src/resource.rc")
ENDIF(WIN32)

ADD_EXECUTABLE (${CMAKE_PROJECT_NAME} ${BUILD_TYPE}  ${SRC_FILES} ${HEAD_FILES})
#MESSAGE("Libraries: ${GDAL_LIBRARY}, ${wxWidgets_LIBRARIES}, ${VROOMGIS_LIBRARY}, ${LSCRASHREPORT_NAME}, ${WXHGVERSION_NAME}")
TARGET_LINK_LIBRARIES(${CMAKE_PROJECT_NAME} ${wxWidgets_LIBRARIES} ${VROOMGIS_LIBRARY} ${LSCRASHREPORT_NAME} ${WXHGVERSION_NAME}) 
TARGET_LINK_LIBRARIES(${VROOMGIS_LIBRARY} ${GDAL_LIBRARY} ${wxWidgets_LIBRARIES})

# Special bundle for APPLE
IF( APPLE )
  # Set a custom plist file for the app bundle
  set_target_properties(${CMAKE_PROJECT_NAME} PROPERTIES 
    MACOSX_BUNDLE_INFO_PLIST ${PROJECT_SOURCE_DIR}/custominfo.plist)
ENDIF (APPLE)


IF (WIN32)
  INCLUDE ("../plugins/vroomgis/vroomgis/build/cmake/Use_visualstudioMT.cmake")
ENDIF (WIN32)


